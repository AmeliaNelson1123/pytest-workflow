[tox]
envlist=py35,py36,py37
[testenv]
deps=pytest
     coverage
     flake8
     flake8-import-order
     mypy
     bandit
     pylint
whitelist_externals=
    sed
    bash
commands =
    flake8 src tests setup.py
    # Skip 'assert used' issue as this is a pytest plugin.'
    # Use csv format because it has cleanest output.
    bandit -s B101 -f csv -r src/ tests/
    # Execution in bash needed for travis
    bash -c 'pylint src/pytest_workflow/ tests/*.py'
    mypy -m src/pytest_workflow
    # Create HTML coverage report for humans and xml coverage report for external services.
    coverage run --source=pytest_workflow -m py.test -v tests
    coverage html
    coverage xml
